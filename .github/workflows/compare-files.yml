name: Compare and Merge Files

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  merge_files:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Compare and merge files
        run: |
          # Buat file output.txt baru
          touch output.txt
          
          # Bandingkan dan gabungkan konten
          # Langkah 1: Tambahkan baris yang sama dari kedua file
          grep -Fxf ip.txt 2024.txt >> output.txt
          
          # Langkah 2: Tambahkan baris unik dari ip.txt
          grep -Fvxf 2024.txt ip.txt >> output.txt
          
          # Langkah 3: Tambahkan baris unik dari 2024.txt
          grep -Fvxf ip.txt 2024.txt >> output.txt
          
          # (Opsional) Urutkan dan hapus duplikat
          sort -u output.txt -o output.txt
          
          # Tampilkan hasil untuk debugging
          echo "Hasil output.txt:"
          cat output.txt
          
      - name: Upload output file
        uses: actions/upload-artifact@v4
        with:
          name: merged-output
          path: output.txt
